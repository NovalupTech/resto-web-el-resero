---
import WhatsappButton from '../components/ui/WhatsappButton.astro';
import InstagramButton from '../components/ui/InstagramButton.astro';
const name = import.meta.env.PUBLIC_NAME;
const logo = import.meta.env.PUBLIC_LOGO;
const siteUrl = import.meta.env.PUBLIC_SITE_URL || Astro.url.origin;
const address = import.meta.env.PUBLIC_ADDRESS;
const phone = import.meta.env.PUBLIC_PHONE;
const facebookUrl = import.meta.env.PUBLIC_FACEBOOK_URL;
const instagramUrl = import.meta.env.PUBLIC_INSTAGRAM_URL;
const twitterUrl = import.meta.env.PUBLIC_TWITTER_URL;
const tiktokUrl = import.meta.env.PUBLIC_TIKTOK_URL;

export interface Props {
  title: string;
}

---

<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Basic SEO -->
    <title>{name}</title>
    <meta name="description" content="Restaurante de alta calidad con los mejores sabores. Experiencia culinaria extraordinaria con ambiente elegante y acogedor. Reserva tu mesa ahora." />
    <meta name="keywords" content="restaurante, comida gourmet, gastronomía, menú, cena, almuerzo, cocina, chef, Avellaneda, Gerli, Zona Sur, Lanus, parrilla, asado, chorizo, morcilla, provoleta, chinchulín, riñón, molleja, pollo, cerdo, matambre, pizza, pizza especial, matambrito, salsa criolla, salsa provenzal, bebida, frita, ensalada, postre" />
    <meta name="author" content={name || "Tu Restaurante"} />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={new URL(Astro.url.pathname, siteUrl)} />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href={logo} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={new URL(Astro.url.pathname, siteUrl)} />
    <meta property="og:title" content={name} />
    <meta property="og:description" content="Restaurante de alta calidad con los mejores sabores. Experiencia culinaria extraordinaria con ambiente elegante y acogedor. Reserva tu mesa ahora." />
    <meta property="og:image" content={new URL('/og-image.png', siteUrl)} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content={`${name || "Tu Restaurante"} - Experiencia Culinaria Extraordinaria`} />
    <meta property="og:site_name" content={name || "Tu Restaurante"} />
    <meta property="og:locale" content="es_ES" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={new URL(Astro.url.pathname, siteUrl)} />
    <meta name="twitter:title" content={name} />
    <meta name="twitter:description" content="Restaurante de alta calidad con los mejores sabores. Experiencia culinaria extraordinaria con ambiente elegante y acogedor." />
    <meta name="twitter:image" content={new URL('/og-image.png', siteUrl)} />
    <meta name="twitter:image:alt" content={`${name || "Tu Restaurante"} - Experiencia Culinaria Extraordinaria`} />
    <meta name="twitter:site" content={twitterUrl} />
    <meta name="twitter:creator" content={twitterUrl} />
    
    <!-- WhatsApp / Telegram -->
    <meta property="og:image:type" content="image/png" />
    <meta name="theme-color" content="#dc2626" />
    
    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "Restaurant",
      "name": name || "Tu Restaurante",
      "description": "Restaurante de alta calidad con los mejores sabores",
      "url": new URL(Astro.url.pathname, siteUrl).toString(),
      "logo": new URL(logo, siteUrl).toString(),
      "image": new URL('/og-image.png', siteUrl).toString(),
      "address": {
        "@type": "PostalAddress",
        "streetAddress": {address},
        "addressLocality": "Avellaneda",
        "addressRegion": "Buenos Aires",
        "postalCode": "1876",
        "addressCountry": "AR"
      },
      "telephone": {phone},
      "openingHours": [
        "Mo-Fr 12:00-15:00",
        "Mo-Fr 18:00-23:00",
        "Sa-Su 10:00-15:00",
        "Sa-Su 18:00-24:00"
      ],
      "servesCuisine": "International",
      "priceRange": "$$",
      "acceptsReservations": true,
      "hasMenu": new URL('/#menu', siteUrl).toString(),
      "sameAs": [
        {facebookUrl},
        {instagramUrl},
        {twitterUrl},
        {tiktokUrl}
      ]
    })} />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  </head>
  <body class="font-body text-secondary-800 bg-white">
    <slot />
    
    <!-- Floating Buttons -->
    <WhatsappButton />
    <InstagramButton />

    <script>
      // Smooth scroll for navigation links
      document.addEventListener('DOMContentLoaded', function() {
        const links = document.querySelectorAll('a[href^="#"]') as NodeListOf<HTMLAnchorElement>;
        
        for (const link of links) {
          link.addEventListener('click', function(e: Event) {
            e.preventDefault();
            const href = (this as HTMLAnchorElement).getAttribute('href');
            const offsetTop = (document.querySelector(href as string) as HTMLElement)?.offsetTop;
            if (offsetTop) {
              scroll({
                top: offsetTop - 80,
                behavior: "smooth"
              });
            }
          });
        }
      });
    </script>
  </body>
</html>
